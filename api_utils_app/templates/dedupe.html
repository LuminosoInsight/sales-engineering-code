<script type="text/javascript"
  src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
  var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>

<script type="text/javascript">
 $(function() {
    //CODE FOR MERGE
    //CODE FOR TERM_UTILS_SEARCH STARTS HERE
    $('input[name=dedupe]').bind('click', function() {
        console.log("sending over:" + $('input[name=acct]').val());
        console.log("sending over:" + $('input[name=proj]').val());
        console.log("sending over:" + $('input[name=batch_size]').val());
      $.getJSON($SCRIPT_ROOT + '/dedupe', {
        acct: $('input[name=acct]').val(),
        proj: $('input[name=proj]').val(),
        batch:  $('input[name=batch_size]').val()
      }, function(data) {
       

       console.log("finished deduping");

        //$('#result').text(w);
      
        var completedCode = '<h4>Project has finished deduing.</h4>';
        

        $('#statusComplete').html(completedCode);

       
      }); //end of function(data) for submitSearchMerge
  
        return false;
      }); 

  });  //end of function document



</script>


{% extends "index.html" %}

{% block content %}

	<div class="page-header"><p>
       <h1>Deduping a Project</h1>
    </div>

      <div id="content">
      <h3>Important Note:</h3>
      <h4>
      <ul>
      <li>Expect 5-10 mins for projects with small volume (10k-200k), and 15-30 minutes for projects with large volume (300k+)</li>
      <li>The deduplication process happens in batches, therefore if the batch size is too large the deduplication process may fail due to memory constraints. We recommend batch size of 40,000 - you may set it higher or lower depending on your computer's capacity.
      </ul></h4>
      <br><br>
      <form>
        
        <input type="text" name="acct" class="form-control" placeholder="account ID: ie. admin" required autofocus>
        <input type="text" name="proj" class="form-control" placeholder="project ID: ie. 45kdh3" required>
        <input type="text" name="batch_size" class="form-control" placeholder="batch size: ie. 40000" required>
        <input class="btn btn-lg btn-primary btn-block" name="dedupe" type="submit" value="Dedupe"/>
        <br>
        <span id="errorLogin">
           {% if error %}<p class=error><strong>Error:</strong> {{ error }}{% endif %}
        </span>
      </form>
      <span id="statusComplete"></span>

      </div>

{% endblock %}